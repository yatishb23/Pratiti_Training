package com.yatish.services;

import com.yatish.models.Employee;
import java.util.Scanner;

public class EmployeeService {

    private Employee[] employees = new Employee[50];
    private int count = 0;
    private int nextId = 1;
    private Scanner sc = new Scanner(System.in);

    public EmployeeService() {
        employees[0] = new Employee(1, "Ram", "Delhi");
        employees[1] = new Employee(2, "Shyam", "Mumbai");
        employees[2] = new Employee(3, "Amit", "Pune");
        employees[3] = new Employee(4, "Rohit", "Bangalore");
        employees[4] = new Employee(5, "Karan", "Chennai");

        count = 5;
        nextId = 6;
    }

    public void addEmployee() {
        if (count == employees.length) {
            System.out.println("Employee array is full!");
            return;
        }

        System.out.print("Enter Name: ");
        String name = sc.next();

        System.out.print("Enter City: ");
        String city = sc.next();

        employees[count++] = new Employee(nextId++, name, city);
        System.out.println("Employee added successfully.");
    }

    // READ
    public void viewEmployees() {
        if (count == 0) {
            System.out.println("No employees found.");
            return;
        }

        System.out.println("\nID  Name  City");
        for (int i = 0; i < count; i++) {
            System.out.println(
                employees[i].id + "   " +
                employees[i].name + "   " +
                employees[i].city
            );
        }
    }

    public void updateEmployee() {
        System.out.print("Enter ID to update: ");
        int id = sc.nextInt();

        for (int i = 0; i < count; i++) {
            if (employees[i].id == id) {
                System.out.print("Enter new Name: ");
                employees[i].name = sc.next();

                System.out.print("Enter new City: ");
                employees[i].city = sc.next();

                System.out.println("Employee updated successfully.");
                return;
            }
        }
        System.out.println("Employee not found.");
    }

    public void deleteEmployee() {
        System.out.print("Enter ID to delete: ");
        int id = sc.nextInt();

        for (int i = 0; i < count; i++) {
            if (employees[i].id == id) {

                for (int j = i; j < count - 1; j++) {
                    employees[j] = employees[j + 1];
                }

                employees[--count] = null;

                for (int k = 0; k < count; k++) {
                    employees[k].id = k + 1;
                }

                nextId = count + 1;

                System.out.println("Employee deleted and IDs adjusted.");
                return;
            }
        }
        System.out.println("Employee not found.");
    }
}
